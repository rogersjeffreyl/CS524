GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    11/09/16 14:38:51 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   2  /* SUDOKU, Number Placement Puzzle */
   3   
   4  /* Based on an example written in GNU MathProg by Andrew Makhorin <mao@mai2.rcnet.ru> */
   5   
   6  /* Sudoku, also known as Number Place, is a logic-based placement
   7     puzzle. The aim of the canonical puzzle is to enter a numerical
   8     digit from 1 through 9 in each cell of a 9x9 grid made up of 3x3
   9     subgrids (called "regions"), starting with various digits given in
  10     some cells (the "givens"). Each row, column, and region must contain
  11     only one instance of each numeral.
  12   
  13     Example:
  14   
  15     +-------+-------+-------+
  16     | 5 3 . | . 7 . | . . . |
  17     | 6 . . | 1 9 5 | . . . |
  18     | . 9 8 | . . . | . 6 . |
  19     +-------+-------+-------+
  20     | 8 . . | . 6 . | . . 3 |
  21     | 4 . . | 8 . 3 | . . 1 |
  22     | 7 . . | . 2 . | . . 6 |
  23     +-------+-------+-------+
  24     | . 6 . | . . . | 2 8 . |
  25     | . . . | 4 1 9 | . . 5 |
  26     | . . . | . 8 . | . 7 9 |
  27     +-------+-------+-------+
  28   
  29     (From Wikipedia, the free encyclopedia.) */
  30   
  31  sets i / 1*9 /; alias (i,j,k);
  32  Parameter givens(i,j) the "givens"
  33   
  34  binary variable x(i,j,k) "x[i,j,k] = 1 means cell [i,j] is assigned number k"
  35   
  36  Equations fa(i,j,k) assign pre-defined numbers using the "givens"
  37            fb(i,j)   each cell must be assigned exactly one number
  38            fc(i,k)   cells in the same row must be assigned distinct numbers
  39            fd(j,k)   cells in the same column must be assigned distinct numbers
  40            fe(i,j,k) cells in the same region must be assigned distinct numbers ;
  41   
  42   
  43  fa(i,j,k)$givens[i,j]..  x[i,j,k] =e= ord(k)=givens(i,j);
  44   
  45  fb(i,j)..  sum(k, x[i,j,k]) =e= 1;
  46   
  47  fc(i,k)..  sum{j, x[i,j,k]} =e= 1;
  48   
  49  fd{j,k}..  sum{i, x[i,j,k]}=e= 1;
  50   
  51  set m / 1*3 /; alias (m,n); parameter s(m) / 1 0, 2 1, 3 2 /;
  52   
  53  fe{I,J,K}$((mod(ord(i),3)=1) and (mod(ord(j),3)=1)).. sum((m,n), x[i+s(m),j+s(n),k]) =e= 1;
  54   
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    11/09/16 14:38:51 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


  55  variable obj; equation objdef; objdef.. obj =e= 1;
  56   
  57  model sudoku / all /;
  58   
  59   
  60  table givens
  61                 1 2 3 4 5 6 7 8 9
  62             1   5 3     7
  63             2   6     1 9 5
  64             3     9 8         6
  65             4   8       6       3
  66             5   4     8   3     1
  67             6   7       2       6
  68             7     6         2 8
  69             8         4 1 9     5
  70             9           8     7 9 ;
  71   
  72   
  73  option limrow=0,limcol=0,solprint=off;
  74  solve sudoku us mip min obj;
  75   
  76  file rep; put rep 'Solution' /;
  77  loop(i,
  78     PUT$(mod(ord(i),3)=1) / " +-------+-------+-------+";
  79     put /;
  80     loop(j,
  81        put$(mod(ord(j),3)=1) " |";
  82        put sum(k, x.l[i,j,k]*ord(k)):2:0 );
  83     put " |" )
  84  put / " +-------+-------+-------+";


COMPILATION TIME     =        0.001 SECONDS      3 MB  24.7.4 r58773 DEX-DEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    11/09/16 14:38:51 Page 3
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Model Statistics    SOLVE sudoku Using MIP From line 74


MODEL STATISTICS

BLOCKS OF EQUATIONS           6     SINGLE EQUATIONS          595
BLOCKS OF VARIABLES           2     SINGLE VARIABLES          730
NON ZERO ELEMENTS         3,187     DISCRETE VARIABLES        729


GENERATION TIME      =        0.020 SECONDS      4 MB  24.7.4 r58773 DEX-DEG


EXECUTION TIME       =        0.020 SECONDS      4 MB  24.7.4 r58773 DEX-DEG
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    11/09/16 14:38:51 Page 4
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Solution Report     SOLVE sudoku Using MIP From line 74


               S O L V E      S U M M A R Y

     MODEL   sudoku              OBJECTIVE  obj
     TYPE    MIP                 DIRECTION  MINIMIZE
     SOLVER  CPLEX               FROM LINE  74

**** SOLVER STATUS     1 Normal Completion         
**** MODEL STATUS      1 Optimal                   
**** OBJECTIVE VALUE                1.0000

 RESOURCE USAGE, LIMIT          0.028      1000.000
 ITERATION COUNT, LIMIT         0    2000000000

IBM ILOG CPLEX   24.7.4 r58773 Released Sep 19, 2016 DEG x86 64bit/MacOS X    
--- GAMS/Cplex licensed for continuous and discrete problems.
Cplex 12.6.3.0

Space for names approximately 0.02 Mb
Use option 'names no' to turn use of names off
MIP status(101): integer optimal solution
Cplex Time: 0.01sec (det. 0.70 ticks)
Fixing integer variables, and solving final LP...
Fixed MIP status(1): optimal
Cplex Time: 0.00sec (det. 0.82 ticks)
Proven optimal solution.

MIP Solution:            1.000000    (0 iterations, 0 nodes)
Final Solve:             1.000000    (0 iterations)

Best possible:           1.000000
Absolute gap:            0.000000
Relative gap:            0.000000



**** REPORT SUMMARY :        0     NONOPT
                             0 INFEASIBLE
                             0  UNBOUNDED
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    11/09/16 14:38:51 Page 5
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
E x e c u t i o n


**** REPORT FILE SUMMARY

rep /Users/quickstep/Documents/git-workspace/CS524/HW6/rep.put


EXECUTION TIME       =        0.001 SECONDS      3 MB  24.7.4 r58773 DEX-DEG


USER: CS 524 Course License                          G160914/0001AS-GEN
      Prof. Ferris, UW-Madison, Fall 2016                        DC2937
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      /Users/quickstep/Documents/git-workspace/CS524/sudoku.gms
Output     /Users/quickstep/Documents/git-workspace/CS524/HW6/sudoku.lst
